{"ast":null,"code":"'use strict';\n\n/**\n * Module dependencies.\n */\nconst isGeneratorFunction = require('is-generator-function');\nconst debug = require('debug')('koa:application');\nconst onFinished = require('on-finished');\nconst response = require('./response');\nconst compose = require('koa-compose');\nconst context = require('./context');\nconst request = require('./request');\nconst statuses = require('statuses');\nconst Emitter = require('events');\nconst util = require('util');\nconst Stream = require('stream');\nconst http = require('http');\nconst only = require('only');\nconst convert = require('koa-convert');\nconst deprecate = require('depd')('koa');\nconst {\n  HttpError\n} = require('http-errors');\n\n/**\n * Expose `Application` class.\n * Inherits from `Emitter.prototype`.\n */\n\nmodule.exports = class Application extends Emitter {\n  /**\n   * Initialize a new `Application`.\n   *\n   * @api public\n   */\n\n  /**\n    *\n    * @param {object} [options] Application options\n    * @param {string} [options.env='development'] Environment\n    * @param {string[]} [options.keys] Signed cookie keys\n    * @param {boolean} [options.proxy] Trust proxy headers\n    * @param {number} [options.subdomainOffset] Subdomain offset\n    * @param {string} [options.proxyIpHeader] Proxy IP header, defaults to X-Forwarded-For\n    * @param {number} [options.maxIpsCount] Max IPs read from proxy IP header, default to 0 (means infinity)\n    *\n    */\n\n  constructor(options) {\n    super();\n    options = options || {};\n    this.proxy = options.proxy || false;\n    this.subdomainOffset = options.subdomainOffset || 2;\n    this.proxyIpHeader = options.proxyIpHeader || 'X-Forwarded-For';\n    this.maxIpsCount = options.maxIpsCount || 0;\n    this.env = options.env || process.env.NODE_ENV || 'development';\n    if (options.keys) this.keys = options.keys;\n    this.middleware = [];\n    this.context = Object.create(context);\n    this.request = Object.create(request);\n    this.response = Object.create(response);\n    // util.inspect.custom support for node 6+\n    /* istanbul ignore else */\n    if (util.inspect.custom) {\n      this[util.inspect.custom] = this.inspect;\n    }\n  }\n\n  /**\n   * Shorthand for:\n   *\n   *    http.createServer(app.callback()).listen(...)\n   *\n   * @param {Mixed} ...\n   * @return {Server}\n   * @api public\n   */\n\n  listen() {\n    debug('listen');\n    const server = http.createServer(this.callback());\n    return server.listen(...arguments);\n  }\n\n  /**\n   * Return JSON representation.\n   * We only bother showing settings.\n   *\n   * @return {Object}\n   * @api public\n   */\n\n  toJSON() {\n    return only(this, ['subdomainOffset', 'proxy', 'env']);\n  }\n\n  /**\n   * Inspect implementation.\n   *\n   * @return {Object}\n   * @api public\n   */\n\n  inspect() {\n    return this.toJSON();\n  }\n\n  /**\n   * Use the given middleware `fn`.\n   *\n   * Old-style middleware will be converted.\n   *\n   * @param {Function} fn\n   * @return {Application} self\n   * @api public\n   */\n\n  use(fn) {\n    if (typeof fn !== 'function') throw new TypeError('middleware must be a function!');\n    if (isGeneratorFunction(fn)) {\n      deprecate('Support for generators will be removed in v3. ' + 'See the documentation for examples of how to convert old middleware ' + 'https://github.com/koajs/koa/blob/master/docs/migration.md');\n      fn = convert(fn);\n    }\n    debug('use %s', fn._name || fn.name || '-');\n    this.middleware.push(fn);\n    return this;\n  }\n\n  /**\n   * Return a request handler callback\n   * for node's native http server.\n   *\n   * @return {Function}\n   * @api public\n   */\n\n  callback() {\n    const fn = compose(this.middleware);\n    if (!this.listenerCount('error')) this.on('error', this.onerror);\n    const handleRequest = (req, res) => {\n      const ctx = this.createContext(req, res);\n      return this.handleRequest(ctx, fn);\n    };\n    return handleRequest;\n  }\n\n  /**\n   * Handle request in callback.\n   *\n   * @api private\n   */\n\n  handleRequest(ctx, fnMiddleware) {\n    const res = ctx.res;\n    res.statusCode = 404;\n    const onerror = err => ctx.onerror(err);\n    const handleResponse = () => respond(ctx);\n    onFinished(res, onerror);\n    return fnMiddleware(ctx).then(handleResponse).catch(onerror);\n  }\n\n  /**\n   * Initialize a new context.\n   *\n   * @api private\n   */\n\n  createContext(req, res) {\n    const context = Object.create(this.context);\n    const request = context.request = Object.create(this.request);\n    const response = context.response = Object.create(this.response);\n    context.app = request.app = response.app = this;\n    context.req = request.req = response.req = req;\n    context.res = request.res = response.res = res;\n    request.ctx = response.ctx = context;\n    request.response = response;\n    response.request = request;\n    context.originalUrl = request.originalUrl = req.url;\n    context.state = {};\n    return context;\n  }\n\n  /**\n   * Default error handler.\n   *\n   * @param {Error} err\n   * @api private\n   */\n\n  onerror(err) {\n    // When dealing with cross-globals a normal `instanceof` check doesn't work properly.\n    // See https://github.com/koajs/koa/issues/1466\n    // We can probably remove it once jest fixes https://github.com/facebook/jest/issues/2549.\n    const isNativeError = Object.prototype.toString.call(err) === '[object Error]' || err instanceof Error;\n    if (!isNativeError) throw new TypeError(util.format('non-error thrown: %j', err));\n    if (404 === err.status || err.expose) return;\n    if (this.silent) return;\n    const msg = err.stack || err.toString();\n    console.error(`\\n${msg.replace(/^/gm, '  ')}\\n`);\n  }\n\n  /**\n   * Help TS users comply to CommonJS, ESM, bundler mismatch.\n   * @see https://github.com/koajs/koa/issues/1513\n   */\n\n  static get default() {\n    return Application;\n  }\n};\n\n/**\n * Response helper.\n */\n\nfunction respond(ctx) {\n  // allow bypassing koa\n  if (false === ctx.respond) return;\n  if (!ctx.writable) return;\n  const res = ctx.res;\n  let body = ctx.body;\n  const code = ctx.status;\n\n  // ignore body\n  if (statuses.empty[code]) {\n    // strip headers\n    ctx.body = null;\n    return res.end();\n  }\n  if ('HEAD' === ctx.method) {\n    if (!res.headersSent && !ctx.response.has('Content-Length')) {\n      const {\n        length\n      } = ctx.response;\n      if (Number.isInteger(length)) ctx.length = length;\n    }\n    return res.end();\n  }\n\n  // status body\n  if (null == body) {\n    if (ctx.response._explicitNullBody) {\n      ctx.response.remove('Content-Type');\n      ctx.response.remove('Transfer-Encoding');\n      return res.end();\n    }\n    if (ctx.req.httpVersionMajor >= 2) {\n      body = String(code);\n    } else {\n      body = ctx.message || String(code);\n    }\n    if (!res.headersSent) {\n      ctx.type = 'text';\n      ctx.length = Buffer.byteLength(body);\n    }\n    return res.end(body);\n  }\n\n  // responses\n  if (Buffer.isBuffer(body)) return res.end(body);\n  if ('string' === typeof body) return res.end(body);\n  if (body instanceof Stream) return body.pipe(res);\n\n  // body: json\n  body = JSON.stringify(body);\n  if (!res.headersSent) {\n    ctx.length = Buffer.byteLength(body);\n  }\n  res.end(body);\n}\n\n/**\n * Make HttpError available to consumers of the library so that consumers don't\n * have a direct dependency upon `http-errors`\n */\n\nmodule.exports.HttpError = HttpError;","map":{"version":3,"names":["isGeneratorFunction","require","debug","onFinished","response","compose","context","request","statuses","Emitter","util","Stream","http","only","convert","deprecate","HttpError","module","exports","Application","constructor","options","proxy","subdomainOffset","proxyIpHeader","maxIpsCount","env","process","NODE_ENV","keys","middleware","Object","create","inspect","custom","listen","server","createServer","callback","toJSON","use","fn","TypeError","_name","name","push","listenerCount","on","onerror","handleRequest","req","res","ctx","createContext","fnMiddleware","statusCode","err","handleResponse","respond","then","catch","app","originalUrl","url","state","isNativeError","prototype","toString","call","Error","format","status","expose","silent","msg","stack","console","error","replace","default","writable","body","code","empty","end","method","headersSent","has","length","Number","isInteger","_explicitNullBody","remove","httpVersionMajor","String","message","type","Buffer","byteLength","isBuffer","pipe","JSON","stringify"],"sources":["/Users/namadatzis/Documents/Proyecto Web/nomad/Nomad/node_modules/koa/lib/application.js"],"sourcesContent":["\n'use strict';\n\n/**\n * Module dependencies.\n */\n\nconst isGeneratorFunction = require('is-generator-function');\nconst debug = require('debug')('koa:application');\nconst onFinished = require('on-finished');\nconst response = require('./response');\nconst compose = require('koa-compose');\nconst context = require('./context');\nconst request = require('./request');\nconst statuses = require('statuses');\nconst Emitter = require('events');\nconst util = require('util');\nconst Stream = require('stream');\nconst http = require('http');\nconst only = require('only');\nconst convert = require('koa-convert');\nconst deprecate = require('depd')('koa');\nconst { HttpError } = require('http-errors');\n\n/**\n * Expose `Application` class.\n * Inherits from `Emitter.prototype`.\n */\n\nmodule.exports = class Application extends Emitter {\n  /**\n   * Initialize a new `Application`.\n   *\n   * @api public\n   */\n\n  /**\n    *\n    * @param {object} [options] Application options\n    * @param {string} [options.env='development'] Environment\n    * @param {string[]} [options.keys] Signed cookie keys\n    * @param {boolean} [options.proxy] Trust proxy headers\n    * @param {number} [options.subdomainOffset] Subdomain offset\n    * @param {string} [options.proxyIpHeader] Proxy IP header, defaults to X-Forwarded-For\n    * @param {number} [options.maxIpsCount] Max IPs read from proxy IP header, default to 0 (means infinity)\n    *\n    */\n\n  constructor(options) {\n    super();\n    options = options || {};\n    this.proxy = options.proxy || false;\n    this.subdomainOffset = options.subdomainOffset || 2;\n    this.proxyIpHeader = options.proxyIpHeader || 'X-Forwarded-For';\n    this.maxIpsCount = options.maxIpsCount || 0;\n    this.env = options.env || process.env.NODE_ENV || 'development';\n    if (options.keys) this.keys = options.keys;\n    this.middleware = [];\n    this.context = Object.create(context);\n    this.request = Object.create(request);\n    this.response = Object.create(response);\n    // util.inspect.custom support for node 6+\n    /* istanbul ignore else */\n    if (util.inspect.custom) {\n      this[util.inspect.custom] = this.inspect;\n    }\n  }\n\n  /**\n   * Shorthand for:\n   *\n   *    http.createServer(app.callback()).listen(...)\n   *\n   * @param {Mixed} ...\n   * @return {Server}\n   * @api public\n   */\n\n  listen(...args) {\n    debug('listen');\n    const server = http.createServer(this.callback());\n    return server.listen(...args);\n  }\n\n  /**\n   * Return JSON representation.\n   * We only bother showing settings.\n   *\n   * @return {Object}\n   * @api public\n   */\n\n  toJSON() {\n    return only(this, [\n      'subdomainOffset',\n      'proxy',\n      'env'\n    ]);\n  }\n\n  /**\n   * Inspect implementation.\n   *\n   * @return {Object}\n   * @api public\n   */\n\n  inspect() {\n    return this.toJSON();\n  }\n\n  /**\n   * Use the given middleware `fn`.\n   *\n   * Old-style middleware will be converted.\n   *\n   * @param {Function} fn\n   * @return {Application} self\n   * @api public\n   */\n\n  use(fn) {\n    if (typeof fn !== 'function') throw new TypeError('middleware must be a function!');\n    if (isGeneratorFunction(fn)) {\n      deprecate('Support for generators will be removed in v3. ' +\n                'See the documentation for examples of how to convert old middleware ' +\n                'https://github.com/koajs/koa/blob/master/docs/migration.md');\n      fn = convert(fn);\n    }\n    debug('use %s', fn._name || fn.name || '-');\n    this.middleware.push(fn);\n    return this;\n  }\n\n  /**\n   * Return a request handler callback\n   * for node's native http server.\n   *\n   * @return {Function}\n   * @api public\n   */\n\n  callback() {\n    const fn = compose(this.middleware);\n\n    if (!this.listenerCount('error')) this.on('error', this.onerror);\n\n    const handleRequest = (req, res) => {\n      const ctx = this.createContext(req, res);\n      return this.handleRequest(ctx, fn);\n    };\n\n    return handleRequest;\n  }\n\n  /**\n   * Handle request in callback.\n   *\n   * @api private\n   */\n\n  handleRequest(ctx, fnMiddleware) {\n    const res = ctx.res;\n    res.statusCode = 404;\n    const onerror = err => ctx.onerror(err);\n    const handleResponse = () => respond(ctx);\n    onFinished(res, onerror);\n    return fnMiddleware(ctx).then(handleResponse).catch(onerror);\n  }\n\n  /**\n   * Initialize a new context.\n   *\n   * @api private\n   */\n\n  createContext(req, res) {\n    const context = Object.create(this.context);\n    const request = context.request = Object.create(this.request);\n    const response = context.response = Object.create(this.response);\n    context.app = request.app = response.app = this;\n    context.req = request.req = response.req = req;\n    context.res = request.res = response.res = res;\n    request.ctx = response.ctx = context;\n    request.response = response;\n    response.request = request;\n    context.originalUrl = request.originalUrl = req.url;\n    context.state = {};\n    return context;\n  }\n\n  /**\n   * Default error handler.\n   *\n   * @param {Error} err\n   * @api private\n   */\n\n  onerror(err) {\n    // When dealing with cross-globals a normal `instanceof` check doesn't work properly.\n    // See https://github.com/koajs/koa/issues/1466\n    // We can probably remove it once jest fixes https://github.com/facebook/jest/issues/2549.\n    const isNativeError =\n      Object.prototype.toString.call(err) === '[object Error]' ||\n      err instanceof Error;\n    if (!isNativeError) throw new TypeError(util.format('non-error thrown: %j', err));\n\n    if (404 === err.status || err.expose) return;\n    if (this.silent) return;\n\n    const msg = err.stack || err.toString();\n    console.error(`\\n${msg.replace(/^/gm, '  ')}\\n`);\n  }\n\n  /**\n   * Help TS users comply to CommonJS, ESM, bundler mismatch.\n   * @see https://github.com/koajs/koa/issues/1513\n   */\n\n  static get default() {\n    return Application;\n  }\n};\n\n/**\n * Response helper.\n */\n\nfunction respond(ctx) {\n  // allow bypassing koa\n  if (false === ctx.respond) return;\n\n  if (!ctx.writable) return;\n\n  const res = ctx.res;\n  let body = ctx.body;\n  const code = ctx.status;\n\n  // ignore body\n  if (statuses.empty[code]) {\n    // strip headers\n    ctx.body = null;\n    return res.end();\n  }\n\n  if ('HEAD' === ctx.method) {\n    if (!res.headersSent && !ctx.response.has('Content-Length')) {\n      const { length } = ctx.response;\n      if (Number.isInteger(length)) ctx.length = length;\n    }\n    return res.end();\n  }\n\n  // status body\n  if (null == body) {\n    if (ctx.response._explicitNullBody) {\n      ctx.response.remove('Content-Type');\n      ctx.response.remove('Transfer-Encoding');\n      return res.end();\n    }\n    if (ctx.req.httpVersionMajor >= 2) {\n      body = String(code);\n    } else {\n      body = ctx.message || String(code);\n    }\n    if (!res.headersSent) {\n      ctx.type = 'text';\n      ctx.length = Buffer.byteLength(body);\n    }\n    return res.end(body);\n  }\n\n  // responses\n  if (Buffer.isBuffer(body)) return res.end(body);\n  if ('string' === typeof body) return res.end(body);\n  if (body instanceof Stream) return body.pipe(res);\n\n  // body: json\n  body = JSON.stringify(body);\n  if (!res.headersSent) {\n    ctx.length = Buffer.byteLength(body);\n  }\n  res.end(body);\n}\n\n/**\n * Make HttpError available to consumers of the library so that consumers don't\n * have a direct dependency upon `http-errors`\n */\n\nmodule.exports.HttpError = HttpError;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}